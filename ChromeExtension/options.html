<html>
<head>
<title>Options for Library Lookup</title>
<script type="text/javascript">
function loadOptions() 
{
   var libraries = localStorage["favLibraries"];
   if ( ! libraries )
   {
      libraries = 'wpl,kpl,rwl';
   }
   libraries = libraries.split(',');
   
   var checkboxes = document.getElementsByTagName("input");
   for (var i = 0; i < checkboxes.length; i++) 
   {
      var child = checkboxes[i];
      for ( var l = 0; l < libraries.length; l++ )
      {
         if (child.value == libraries[l] ) 
         {
            child.checked = "true";
            break;
         }
      }
   }
}

function saveOptions() 
{
    var libraries = new Array();
    var checkboxes = document.getElementsByTagName("input");
    for (var i = 0; i < checkboxes.length; i++) 
    {
        var child = checkboxes[i];
        if ( child.checked )
        {
            libraries.push(child.value);
        }
    }
    localStorage["favLibraries"] = libraries;

    showSaved();
}

function clearStatus()
{
    var status = document.getElementById("status");
    status.innerHTML = '';
}

function showSaved()
{
    var status = document.getElementById("status");
    status.innerHTML = 'saved';
    window.setTimeout(clearStatus, 1000);
}

function eraseOptions() 
{
   localStorage.removeItem("favLibraries");
   location.reload();
}
</script>
</head>
<body onload="loadOptions()">
<h1>Favorite Libraries</h1>
  <fieldset>
    <label> <input type="checkbox" value="wpl">Waterloo Public Library </label><br>
    <label> <input type="checkbox" value="kpl">Kitchener Public Library </label><br>
    <label> <input type="checkbox" value="rwl">Region of Waterloo Library </label><br>
  </fieldset>
  <br />
  <button onclick="saveOptions()">Save</button><span id="status"></span>
</body>
</html>
